<!DOCTYPE html>
<html>
<head>
  <title>Ziwei Calculator in JS playground</title>
  <link href="data:image/x-icon;base64,
    iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAL
    EwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6
    eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYg
    eG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4K
    ICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlm
    Zj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRh
    dGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9y
    ZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAA5VJREFUOBFNk/1PW1UYx59zb2/XtWXtGJTejArS
    DpWBIojMdCPZ5pwhZrKBW/wTSPeDQLaQGeOcv0hMSPzJXxhCGMbpFmOykUwzg8hginN1xRZ5GX3v
    7RvQwu3dvbf3Hs/Fsfgk5yU5z+c5z/fkexD8FzRZlKf7195/73Sn232kVU/BfoPRiJ9IxdjM1OT9
    kW9ufEdyvE/znjHaRgt9c0vLZ2OjI3x4dQXP3buDuehjLAo8jgYX8fLCPB4fvbr5igM+Jbk7jG6b
    1ODz3d3f+v1+rKoqVhVJ+u3ehFgQeDmRiMg/3PhSXP7nL6koi9j35+/47DtvjhKG0mCkTee6ugb6
    +y9cBJVX9paxqsG4l1lc8IEqSyBJItD6XfC8sxbWM2HJZqtkchs8qm9s+pigV7QqzZ1dnR9YrSWQ
    ScfU/GaBuT/5I456p2ArsQJKLgm5UAACD//AQO3WZzKcXHPABde/Hu8lbAPd19PTc/KtY21FuSA7
    nI3MgncOq+sR1HTsNNS3HgVXfTOU2SshG/ob8UIRv9zSplMVWaaQaowFQ1ndS3V1hxgGQZLj0BOJ
    Aj6xhFpPnoXq2jpyAQCXTMKs1w+ATaBfj8PSwjxkUyu4tJSFE2+3H9IR1uZw1IBlnw0FvA+h1O4A
    azkLi0tLYK+ogOGhIcisrUE6lYKjB1m0r4aH193tiKEQTE8/2E8hilIxViG/sQaIPKmiSCAIBbBa
    rJDJpGF2dgacTifkcnkQRQFMJjNZeUglo0DrdEAVRCkZj4chGgxgTWtRFPFPt78Hnz8AQ1eH4dbt
    CTjv8YAZ56Gy2oUZgxEyyQguCALkeSFKA+ZdpzrOtblq6xRFxbQgFiG9PIe+6O+G8YlfwcIAnDrx
    BrQfPwysqxFV1b4Az1U51a0tiX63o2Nc80H9tbGx2TNnOszeBz/LCt7F6DCFc4lVlEpxQGwFdtKZ
    xV6FDSUlqLCVlppajuuHvxrJezyeI9tGIkU+mpq8e8VWZlaJcZRy1sXEIqvEr3hbJ0/aPfBiA5Hp
    l7OpGG3Y46Dc7sOfEO7yjqen44lEVUND46tECm0yGeT1bByX2li1vIJVI6s+1Ww2KxVsNROMJFFf
    36VrHBfXjITJePYxtG4+HBwczPsePcKh4DLmYkG8sZbG4dAKnvrlLv58YGCT5Fz+H0PvSNA62fnO
    moO6ensvtFr2mFhFLtKCVOSu37w1E348f5OczZOhxTbzL+FXtFV64DG6AAAAAElFTkSuQmCC"
    rel="icon" type="image/x-icon" />
  <link rel="stylesheet" type="text/css" href="views/styles.css">
  <script type="text/javascript" src="views/scripts.js"></script>
  <script type="text/javascript" src="extensions.js"></script>
  <script type="text/javascript" src="configs/branch_sets.js"></script>
  <script type="text/javascript" src="configs/branches.js"></script>
  <script type="text/javascript" src="configs/forteen_main_stars.js"></script>
  <script type="text/javascript" src="configs/four_transformation_stars.js"></script>
  <script type="text/javascript" src="configs/genders.js"></script>
  <script type="text/javascript" src="configs/loc_ton_constellation.js"></script>
  <script type="text/javascript" src="configs/normal_stars.js"></script>
  <script type="text/javascript" src="configs/other_important_stars.js"></script>
  <script type="text/javascript" src="configs/palaces.js"></script>
  <script type="text/javascript" src="configs/six_deadly_stars.js"></script>
  <script type="text/javascript" src="configs/six_lucky_stars.js"></script>
  <script type="text/javascript" src="configs/stems.js"></script>
  <script type="text/javascript" src="configs/thai_tue_constellation.js"></script>
  <script type="text/javascript" src="configs/trang_sinh_constellation.js"></script>
  <script type="text/javascript" src="configs/tuan_triet.js"></script>
  <script type="text/javascript" src="configs/wuxing.js"></script>
  <script type="text/javascript" src="models/gan_zhi.js"></script>
  <script type="text/javascript" src="models/result_palace.js"></script>
  <script type="text/javascript" src="models/result_table.js"></script>
  <script type="text/javascript" src="models/profile.js"></script>
  <script type="text/javascript" src="models/calculator.js"></script>
  <script type="text/javascript" src="utils/reuse_utils.js"></script>
  <script type="text/javascript" src="utils/calc_commons.js"></script>
  <script type="text/javascript" src="utils/calc_forteen_main_stars.js"></script>
  <script type="text/javascript" src="utils/calc_four_transformation_stars.js"></script>
  <script type="text/javascript" src="utils/calc_normal_stars.js"></script>
  <script type="text/javascript" src="utils/calc_other_important_stars.js"></script>
  <script type="text/javascript" src="utils/calc_sequential_constellations.js"></script>
  <script type="text/javascript" src="utils/calc_six_deadly_stars.js"></script>
  <script type="text/javascript" src="utils/calc_six_lucky_stars.js"></script>
  <script type="text/javascript" src="utils/calc_tuan_triet.js"></script>
  <script type="text/javascript" src="views/views_generator.js"></script>
  <script type="text/javascript" src="ziwei.js"></script>
  <!-- <script type="text/javascript" src="ziwei.es6.js"></script> -->
  <!-- <script type="text/javascript" src="ziwei.es5.js"></script> -->
  <!-- <script type="text/javascript" src="ziwei.min.js"></script> -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      calculator = new Ziwei.Calculator();
      resultTable = calculator.calculateProfile();

      palaceSource = $("#palace-template").html();
      template = Handlebars.compile(palaceSource);

      palace = resultTable.palaces.than;
      palaceHtml = palace.renderHtml(template);

      resultTable.palaces.forEach((position, palace) => {
        var context = palace.getFullNames();
        var palaceHtml = template(context);
        $(`#${position}`).append(palaceHtml);
      });
    });
  </script>
</head>
<body id="body">
  <canvas id="canvas" width="1138px" height="640px"></canvas>
  <table class="result-table" border="1">
    <tr>
      <td id="ty2"></td>
      <td id="ngo"></td>
      <td id="mui"></td>
      <td id="than"></td>
    </tr>
    <tr>
      <td id="thin"></td>
      <td rowspan="2" colspan="2" id="center-info"></td>
      <td id="dau"></td>
    </tr>
    <tr>
      <td id="mao"></td>
      <td id="tuat"></td>
    </tr>
    <tr>
      <td id="dan"></td>
      <td id="suu"></td>
      <td id="ty"></td>
      <td id="hoi"></td>
    </tr>
  </table>
  <script id="palace-template" type="text/x-handlebars-template">
    <table class="palace" width="280px" height="160px">
      <tr height="15%">
        <td width="30%" class="top left">{{ name }}</td>
        <td width="40%" class="top center empty"></td>
        <td width="30%" class="top right">{{ body }}</td>
      </tr>
      <tr height="15%">
        <td></td>
        <td rowspan="2" class="center main-stars">
          <div>
            <!-- main stars -->
          </div>
        </td>
        <td></td>
      </tr>
      <tr height="55%">
        <!-- other stars -->
      </tr>
      <tr height="15%">
        <td class="bottom left">{{ position }}</td>
        <td class="bottom center">{{ trangSinhConstellation }}</td>
        <td class="bottom right">{{ opportunityAge }}</td>
      </tr>
    </table>
  </script>
</body>
</html>