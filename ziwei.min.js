"use strict";function _toConsumableArray(n){if(Array.isArray(n)){for(var t=0,i=Array(n.length);t<n.length;t++)i[t]=n[t];return i}return Array.from(n)}function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function n(n,t){var i=[],e=!0,a=!1,o=void 0;try{for(var r,h=n[Symbol.iterator]();!(e=(r=h.next()).done)&&(i.push(r.value),!t||i.length!==t);e=!0);}catch(s){a=!0,o=s}finally{try{!e&&h["return"]&&h["return"]()}finally{if(a)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function n(n,t){for(var i=0;i<t.length;i++){var e=t[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}}(),Ziwei=function(){Number.prototype.isEven=function(){return this%2===0},Number.prototype.quotient=function(n){return(this-this%n)/n},Number.prototype.limitInc=function(){var n=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=arguments.length<=1||void 0===arguments[1]?12:arguments[1],i=arguments.length<=2||void 0===arguments[2]?1:arguments[2],e=this+n-1,a=0;return i>e&&(a=(t-e).quotient(t)),(e+a*t)%t+i},Number.prototype.reflectIndex=function(){var n=arguments.length<=0||void 0===arguments[0]?2:arguments[0];return n.limitInc(-this+n)},String.prototype.getDisplayName=function(){var n=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1];if(void 0!==n)return Ziwei.Configs[n][t+"Names"][this];var i=["ThaiTueConstellation","LocTonConstellation","SixDeadlyStars","SixLuckyStars","OtherImportantStars","NormalStars","FourTransformationStars"].map(function(n){return Ziwei.Configs[""+n][t+"Names"]}),e=Object.assign.apply(this,i);return e[this]},String.prototype.getFullName=function(){var n=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];return this.getDisplayName(n)},String.prototype.getShortName=function(){var n=arguments.length<=0||void 0===arguments[0]?void 0:arguments[0];return this.getDisplayName(n,"Short")},String.prototype.getElementColorStyle=function(){var n=Ziwei.Configs.Wuxing.ElementColors[this];return void 0===n?"":"color: "+n+";"},String.prototype.getPlaceQualityColorStyle=function(){var n=/(?!\()(\w|\u0110)(?=\))/gi,t=(this.match(n)||[])[0],i=Ziwei.Configs.Wuxing.PlaceQualityColors[t];return void 0===i?"":"color: "+i+";"},Array.prototype.convertPalaceCoordinateToPos=function(){var n=_slicedToArray(this,2),t=n[0],i=n[1];return{left:8+284*t-142-25,top:8+164*i-10}},Array.prototype.convertLineOriginCoordinateToPos=function(){var n=_slicedToArray(this,2),t=n[0],i=n[1];return{left:284*t,top:164*i}},Array.prototype.drawLineTo=function(n,t){var i=arguments.length<=2||void 0===arguments[2]?"black":arguments[2],e=document.getElementById(t),a=e.getContext("2d");a.beginPath();var o=this.convertLineOriginCoordinateToPos(),r=n.convertLineOriginCoordinateToPos();a.moveTo(o.left,o.top),a.lineTo(r.left,r.top),a.lineWidth=1,a.strokeStyle=i,a.stroke()},Array.prototype.transpose=function(){var n=this;return n[0].map(function(t,i){return n.map(function(n){return n[i]})})},Array.prototype.toHash=function(){return this.reduce(function(n,t){return n[t[0]]=t[1],n},{})},Array.prototype.toHashOfArrays=function(){return this.reduce(function(n,t){var i=_slicedToArray(t,2),e=i[0],a=i[1];return n[e]=n[e]||[],n[e].push(a),n},{})},Array.fromRange=function(n,t){if(n===t)return[n];var i=n,e=t,a=!1;n>t&&(i=t,e=n,a=!0);var o=Array.apply(null,Array(e-i+1)).map(function(n,t){return i+t});return a&&(o=o.reverse()),o},Object.prototype.allKeys=function(){return Object.keys(this)},Object.prototype.allValues=function(){var n=this;return Object.keys(n).map(function(t){return n[t]})},Object.prototype.count=function(){return Object.keys(this).length},Object.prototype.forEach=function(n){var t=this;Object.keys(t).forEach(function(i){return n(i,t[i])})},Object.prototype.mapKeyValues=function(n){var t=this;return Object.keys(t).map(function(i){return n(i,t[i])})},Object.prototype.findKeyValues=function(n){var t=this,i={};return Object.keys(t).find(function(e){n(e,t[e])===!0&&0===i.count()&&(i[e]=t[e])}),i},Object.prototype.findKey=function(n){var t=this;return Object.keys(t).find(function(i){return n(i,t[i])})},Object.prototype.filter=function(n){var t=this,i={};return Object.keys(t).filter(function(e){n(e,t[e])===!0&&(i[e]=t[e])}),i},Object.prototype.filterKeys=function(n){var t=this;return Object.keys(t).filter(function(i){return n(i,t[i])})};var n={Trilogy:{ByElements:{hoa:["dan","ngo","tuat"],thuy:["than","ty","thin"],kim:["ty2","dau","suu"],moc:["hoi","mao","mui"]},ByBranches:{ty:"thuy",suu:"kim",dan:"hoa",mao:"moc",thin:"thuy",ty2:"kim",ngo:"hoa",mui:"moc",than:"thuy",dau:"kim",tuat:"hoa",hoi:"moc"},ByRelatives:[["hoi","ty","suu"],["dan","mao","thin"],["ty2","ngo","mui"],["than","dau","tuat"]]},Duadrilogy:{}},t={Names:{ty:"T\xfd",suu:"S\u1eedu",dan:"D\u1ea7n",mao:"M\xe3o",thin:"Th\xecn",ty2:"T\u1ef5",ngo:"Ng\u1ecd",mui:"M\xf9i",than:"Th\xe2n",dau:"D\u1eadu",tuat:"Tu\u1ea5t",hoi:"H\u1ee3i"},Converts:{"T\xfd":"ty","S\u1eedu":"suu","D\u1ea7n":"dan","M\xe3o":"mao","Th\xecn":"thin","T\u1ef5":"ty2","Ng\u1ecd":"ngo","M\xf9i":"mui","Th\xe2n":"than","D\u1eadu":"dau","Tu\u1ea5t":"tuat","H\u1ee3i":"hoi"},Indexes:{ty:1,suu:2,dan:3,mao:4,thin:5,ty2:6,ngo:7,mui:8,than:9,dau:10,tuat:11,hoi:12},Orders:["_","ty","suu","dan","mao","thin","ty2","ngo","mui","than","dau","tuat","hoi"]},i={Names:{tu_vi:"T\u1eed Vi",thien_co:"Thi\xean C\u01a1",liem_trinh:"Li\xeam Trinh",thai_duong:"Th\xe1i D\u01b0\u01a1ng",vu_khuc:"V\u0169 Kh\xfac",thien_dong:"Thi\xean \u0110\u1ed3ng",thien_phu:"Thi\xean Ph\u1ee7",thai_am:"Th\xe1i \xc2m",tham_lang:"Tham Lang",cu_mon:"C\u1ef1 M\xf4n",thien_tuong:"Thi\xean T\u01b0\u1edbng",thien_luong:"Thi\xean L\u01b0\u01a1ng",that_sat:"Th\u1ea5t S\xe1t",pha_quan:"Ph\xe1 Qu\xe2n"},ShortNames:{tu_vi:"T\u1eed",thien_co:"C\u01a1",liem_trinh:"Li\xeam",thai_duong:"Nh\u1eadt",vu_khuc:"V\u0169",thien_dong:"\u0110\u1ed3ng",thien_phu:"Ph\u1ee7",thai_am:"Nguy\u1ec7t",tham_lang:"Tham",cu_mon:"C\u1ef1",thien_tuong:"T\u01b0\u1edbng",thien_luong:"L\u01b0\u01a1ng",that_sat:"S\xe1t",pha_quan:"Ph\xe1"},Places:{tu_vi:{ty:"B",suu:"\u0110",dan:"M",mao:"B",thin:"V",ty2:"M",ngo:"M",mui:"\u0110",than:"M",dau:"B",tuat:"V",hoi:"B"},thien_co:{ty:"\u0110",suu:"\u0110",dan:"H",mao:"M",thin:"M",ty2:"V",ngo:"\u0110",mui:"\u0110",than:"V",dau:"M",tuat:"M",hoi:"H"},thai_duong:{ty:"H",suu:"\u0110",dan:"V",mao:"V",thin:"V",ty2:"M",ngo:"M",mui:"\u0110",than:"H",dau:"H",tuat:"H",hoi:"H"},vu_khuc:{ty:"V",suu:"M",dan:"V",mao:"\u0110",thin:"M",ty2:"H",ngo:"V",mui:"M",than:"V",dau:"\u0110",tuat:"M",hoi:"H"},thien_dong:{ty:"V",suu:"H",dan:"M",mao:"\u0110",thin:"H",ty2:"\u0110",ngo:"H",mui:"H",than:"M",dau:"H",tuat:"H",hoi:"\u0110"},liem_trinh:{ty:"V",suu:"\u0110",dan:"V",mao:"H",thin:"M",ty2:"H",ngo:"V",mui:"\u0110",than:"V",dau:"H",tuat:"M",hoi:"H"},thien_phu:{ty:"M",suu:"B",dan:"M",mao:"B",thin:"V",ty2:"\u0110",ngo:"M",mui:"\u0110",than:"M",dau:"B",tuat:"V",hoi:"\u0110"},thai_am:{ty:"V",suu:"\u0110",dan:"H",mao:"H",thin:"H",ty2:"H",ngo:"H",mui:"\u0110",than:"V",dau:"M",tuat:"M",hoi:"M"},tham_lang:{ty:"H",suu:"M",dan:"\u0110",mao:"H",thin:"V",ty2:"H",ngo:"H",mui:"M",than:"\u0110",dau:"H",tuat:"V",hoi:"H"},cu_mon:{ty:"V",suu:"H",dan:"V",mao:"M",thin:"H",ty2:"H",ngo:"V",mui:"H",than:"\u0110",dau:"M",tuat:"H",hoi:"\u0110"},thien_tuong:{ty:"V",suu:"\u0110",dan:"M",mao:"H",thin:"V",ty2:"\u0110",ngo:"V",mui:"\u0110",than:"M",dau:"H",tuat:"V",hoi:"\u0110"},thien_luong:{ty:"V",suu:"\u0110",dan:"V",mao:"V",thin:"M",ty2:"H",ngo:"M",mui:"\u0110",than:"V",dau:"H",tuat:"M",hoi:"H"},that_sat:{ty:"M",suu:"\u0110",dan:"M",mao:"H",thin:"H",ty2:"V",ngo:"M",mui:"\u0110",than:"M",dau:"H",tuat:"H",hoi:"V"},pha_quan:{ty:"M",suu:"V",dan:"H",mao:"H",thin:"\u0110",ty2:"H",ngo:"M",mui:"V",than:"H",dau:"H",tuat:"\u0110",hoi:"H"}}},e={Names:{hoa_loc:"H\xf3a L\u1ed9c",hoa_quyen:"H\xf3a Quy\u1ec1n",hoa_khoa:"H\xf3a Khoa",hoa_ky:"H\xf3a K\u1ef5"},ShortNames:{hoa_loc:"L\u1ed9c",hoa_quyen:"Quy\u1ec1n",hoa_khoa:"Khoa",hoa_ky:"K\u1ef5"},Qualities:{hoa_loc:"good",hoa_quyen:"good",hoa_khoa:"good",hoa_ky:"bad"}},a={Names:{male:"Nam",female:"N\u1eef"},Converts:{Nam:"male","N\u1eef":"female"},Directions:{male:1,female:-1}},o={Names:{bac_si:"B\xe1c S\u0129",luc_si:"L\u1ef1c S\u0129",thanh_long:"Thanh Long",tieu_hao:"Ti\u1ec3u Hao",tuong_quan:"T\u01b0\u1edbng Qu\xe2n",tau_thu:"T\u1ea5u Th\u01b0",phi_liem:"Phi Li\xeam",hy_than:"H\u1ef7 Th\u1ea7n",benh_phu:"B\u1ec7nh Ph\xf9",dai_hao:"\u0110\u1ea1i Hao",phuc_binh:"Ph\u1ee5c Binh",quan_phu2:"Quan Ph\u1ee7"},ShortNames:{bac_si:"B.S\u0129",luc_si:"L.S\u0129",thanh_long:"T.Long",tieu_hao:"T.Hao",tuong_quan:"T.Qu\xe2n",tau_thu:"T.Th\u01b0",phi_liem:"P.Li\xeam",hy_than:"H.Th\u1ea7n",benh_phu:"B.Ph\xf9",dai_hao:"\u0110.Hao",phuc_binh:"P.Binh",quan_phu2:"Q.Ph\u1ee7"},Orders:["bac_si","luc_si","thanh_long","tieu_hao","tuong_quan","tau_thu","phi_liem","hy_than","benh_phu","dai_hao","phuc_binh","quan_phu2"],Qualities:{bac_si:"good",luc_si:"good",thanh_long:"good",tieu_hao:"bad",tuong_quan:"good",tau_thu:"good",phi_liem:"good",hy_than:"good",benh_phu:"bad",dai_hao:"bad",phuc_binh:"bad",quan_phu2:"bad"}},r={Names:{thien_hinh:"Thi\xean H\xecnh",thien_dieu:"Thi\xean Di\xeau",thien_y:"Thi\xean Y",thien_khoc:"Thi\xean Kh\u1ed1c",thien_hu:"Thi\xean H\u01b0",hoa_cai:"Hoa C\xe1i",am_sat:"\xc2m S\xe1t",co_than:"C\xf4 Th\u1ea7n",qua_tu:"Qu\u1ea3 T\xfa"},ShortNames:{thien_hinh:"H\xecnh",thien_dieu:"Di\xeau",thien_y:"Y",thien_khoc:"Kh\u1ed1c",thien_hu:"H\u01b0",hoa_cai:"C\xe1i",am_sat:"\xc2m S\xe1t",co_than:"C\xf4",qua_tu:"Qu\u1ea3"},Qualities:{thien_hinh:"bad",thien_dieu:"bad",thien_y:"good",thien_khoc:"bad",thien_hu:"bad",hoa_cai:"bad",am_sat:"bad",co_than:"bad",qua_tu:"bad"}},h={Names:{loc_ton:"L\u1ed9c T\u1ed3n",thien_ma:"Thi\xean M\xe3"},ShortNames:{loc_ton:"L\u1ed9c",thien_ma:"M\xe3"},Qualities:{loc_ton:"good",thien_ma:"good"}},s={Names:{self:"M\u1ec7nh",parents:"Ph\u1ee5 M\u1eabu",mental:"Ph\xfac \u0110\u1ee9c",property:"\u0110i\u1ec1n Tr\u1ea1ch",career:"Quan L\u1ed9c",friends:"N\xf4 B\u1ed9c",travel:"Thi\xean Di",health:"T\u1eadt \xc1ch",wealth:"T\xe0i B\u1ea1ch",children:"T\u1eed T\u1ee9c",spouse:"Phu Th\xea",siblings:"Huynh \u0110\u1ec7"},ShortNames:{self:"M\u1ec7nh",parents:"Ph\u1ee5",mental:"Ph\xfac",property:"\u0110i\u1ec1n",career:"Quan",friends:"N\xf4",travel:"Di",health:"T\u1eadt",wealth:"T\xe0i",children:"T\u1eed",spouse:"Ph\u1ed1i",siblings:"B\xe0o"},Orders:["self","parents","mental","property","career","friends","travel","health","wealth","children","spouse","siblings"],DrawingRootCoordinates:{ty:[2.5,3],suu:[1.5,3],dan:[1,3],mao:[1,2.5],thin:[1,1.5],ty2:[1,1],ngo:[1.5,1],mui:[2.5,1],than:[3,1],dau:[3,1.5],tuat:[3,2.5],hoi:[3,3]}},u={Names:{dia_khong:"\u0110\u1ecba Kh\xf4ng",dia_kiep:"\u0110\u1ecba Ki\u1ebfp",kinh_duong:"K\xecnh D\u01b0\u01a1ng",da_la:"\u0110\xe0 La",hoa_tinh:"H\u1ecfa Tinh",linh_tinh:"Linh Tinh"},ShortNames:{dia_khong:"Kh\xf4ng",dia_kiep:"Ki\u1ebfp",kinh_duong:"K\xecnh",da_la:"\u0110\xe0",hoa_tinh:"H\u1ecfa",linh_tinh:"Linh"},Qualities:{dia_khong:"bad",dia_kiep:"bad",kinh_duong:"bad",da_la:"bad",hoa_tinh:"bad",linh_tinh:"bad"}},c={Names:{ta_phu:"T\u1ea3 Ph\xf9",huu_bat:"H\u1eefu B\u1eadt",van_xuong:"V\u0103n X\u01b0\u01a1ng",van_khuc:"V\u0103n Kh\xfac",thien_khoi:"Thi\xean Kh\xf4i",thien_viet:"Thi\xean Vi\u1ec7t"},ShortNames:{ta_phu:"T\u1ea3",huu_bat:"H\u1eefu",van_xuong:"X\u01b0\u01a1ng",van_khuc:"Kh\xfac",thien_khoi:"Kh\xf4i",thien_viet:"Vi\u1ec7t"},Qualities:{ta_phu:"good",huu_bat:"good",van_xuong:"good",van_khuc:"good",thien_khoi:"good",thien_viet:"good"}},l={Names:{giap:"Gi\xe1p",at:"\u1ea4t",binh:"B\xednh",dinh:"\u0110inh",mau:"M\u1eadu",ky:"K\u1ef7",canh:"Canh",tan:"T\xe2n",nham:"Nh\xe2m",quy:"Qu\xfd"},Converts:{"Gi\xe1p":"giap","\u1ea4t":"at","B\xednh":"binh","\u0110inh":"dinh","M\u1eadu":"mau","K\u1ef7":"ky",Canh:"canh","T\xe2n":"tan","Nh\xe2m":"nham","Qu\xfd":"quy"},Indexes:{giap:1,at:2,binh:3,dinh:4,mau:5,ky:6,canh:7,tan:8,nham:9,quy:10},Orders:["_","giap","at","binh","dinh","mau","ky","canh","tan","nham","quy"],Directions:{giap:1,at:-1,binh:1,dinh:-1,mau:1,ky:-1,canh:1,tan:-1,nham:1,quy:-1},Yinyang:{"-1":"\xc2m",1:"D\u01b0\u01a1ng"}},g={Names:{thai_tue:"Th\xe1i Tu\u1ebf",thieu_duong:"Thi\u1ebfu D\u01b0\u01a1ng",tang_mon:"Tang M\xf4n",thieu_am:"Thi\u1ebfu \xc2m",quan_phu:"Quan Ph\xf9",tu_phu:"T\u1eed Ph\xf9",tue_pha:"Tu\u1ebf Ph\xe1",long_duc:"Long \u0110\u1ee9c",bach_ho:"B\u1ea1ch H\u1ed5",phuc_duc:"Ph\xfac \u0110\u1ee9c",dieu_khach:"\u0110i\u1ebfu Kh\xe1ch",truc_phu:"Tr\u1ef1c Ph\xf9"},ShortNames:{thai_tue:"T.Tu\u1ebf",thieu_duong:"T.D\u01b0\u01a1ng",tang_mon:"T.M\xf4n",thieu_am:"T.\xc2m",quan_phu:"Q.Ph\xf9",tu_phu:"T.Ph\xf9",tue_pha:"T.Ph\xe1",long_duc:"L.\u0110\u1ee9c",bach_ho:"B.H\u1ed5",phuc_duc:"P.\u0110\u1ee9c",dieu_khach:"\u0110.Kh\xe1ch",truc_phu:"Tr.Ph\xf9"},Orders:["thai_tue","thieu_duong","tang_mon","thieu_am","quan_phu","tu_phu","tue_pha","long_duc","bach_ho","phuc_duc","dieu_khach","truc_phu"],Qualities:{thai_tue:"bad",thieu_duong:"good",tang_mon:"bad",thieu_am:"good",quan_phu:"bad",tu_phu:"bad",tue_pha:"bad",long_duc:"good",bach_ho:"bad",phuc_duc:"good",dieu_khach:"bad",truc_phu:"bad"}},m={Names:{trang_sinh:"Tr\xe0ng Sinh",moc_duc:"M\u1ed9c D\u1ee5c",quan_doi:"Quan \u0110\u1edbi",lam_quan:"L\xe2m Quan",de_vuong:"\u0110\u1ebf V\u01b0\u1ee3ng",suy:"Suy",benh:"B\u1ec7nh",tu:"T\u1eed",mo:"M\u1ed9",tuyet:"Tuy\u1ec7t",thai:"Thai",duong:"D\u01b0\u1ee1ng"},ShortNames:{trang_sinh:"Tr.Sinh",moc_duc:"M.D\u1ee5c",quan_doi:"Q.\u0110\u1edbi",lam_quan:"L.Quan",de_vuong:"V\u01b0\u1ee3ng",suy:"Suy",benh:"B\u1ec7nh",tu:"T\u1eed",mo:"M\u1ed9",tuyet:"Tuy\u1ec7t",thai:"Thai",duong:"D\u01b0\u1ee1ng"},Orders:["trang_sinh","moc_duc","quan_doi","lam_quan","de_vuong","suy","benh","tu","mo","tuyet","thai","duong"]},d={Names:{tuan:"Tu\u1ea7n Kh\xf4ng",triet:"Tri\u1ec7t Kh\xf4ng"},ShortNames:{tuan:"Tu\u1ea7n",triet:"Tri\u1ec7t"}},y={Names:{hoa:"H\u1ecfa",tho:"Th\u1ed5",moc:"M\u1ed9c",kim:"Kim",thuy:"Th\u1ee7y"},Converts:{"H\u1ecfa":"hoa","Th\u1ed5":"tho","M\u1ed9c":"moc",Kim:"kim","Th\u1ee7y":"thuy"},Elements:["hoa","tho","moc","kim","thuy"],CucByElements:{thuy:2,moc:3,kim:4,tho:5,hoa:6},ElementsByBranches:{ty:"thuy",suu:"thuy",dan:"hoa",mao:"hoa",thin:"moc",ty2:"moc",ngo:"tho",mui:"tho",than:"kim",dau:"kim",tuat:"hoa",hoi:"hoa"},KmtlnTable:{hoa:"dau",tho:"ngo",kim:"hoi",moc:"thin",thuy:"suu"},ElementColors:{hoa:"red",tho:"orange",moc:"darkgreen",kim:"darkgrey",thuy:"black"},PlaceQualityColors:{M:"red",V:"orange","\u0110":"yellowgreen",B:"darkgreen",H:"darkgrey"},AgeSymbols:{"Gi\xe1p T\xfd":"H\u1ea3i Trung KIM","\u1ea4t S\u1eedu":"H\u1ea3i Trung KIM","B\xednh D\u1ea7n":"L\xf4 Trung HO\u1ea2","\u0110inh M\xe3o":"L\xf4 Trung HO\u1ea2","M\u1eadu Th\xecn":"\u0110\u1ea1i L\xe2m M\u1ed8C","K\u1ef7 Ty":"\u0110\u1ea1i L\xe2m M\u1ed8C","Canh Ng\u1ecd":"L\u1ed9 B\xe0ng TH\u1ed4","T\xe2n M\xf9i":"L\u1ed9 B\xe0ng TH\u1ed4","Nh\xe2m Th\xe2n":"Ki\u1ebfm Phong KIM","Qu\xfd D\u1eadu":"Ki\u1ebfm Phong KIM","Gi\xe1p Tu\u1ea5t":"S\u01a1n \u0110\u1ea7u HO\u1ea2","\u1ea4t H\u1ee3i":"S\u01a1n \u0110\u1ea7u HO\u1ea2","B\xednh T\xfd":"Giang H\u1ea1 THU\u1ef6","\u0110inh S\u1eedu":"Giang H\u1ea1 THU\u1ef6","M\u1eadu D\u1ea7n":"Th\xe0nh \u0110\u1ea7u TH\u1ed4","K\u1ef9 M\xe3o":"Th\xe0nh \u0110\u1ea7u TH\u1ed4","Canh Th\xecn":"B\u1ea1ch L\u1ea1p KIM","T\xe2n Ty":"B\u1ea1ch L\u1ea1p KIM","Nh\xe2m Ng\u1ecd":"D\u01b0\u01a1ng Li\u1ec5u M\u1ed8C","Qu\xfd M\xf9i":"D\u01b0\u01a1ng Li\u1ec5u M\u1ed8C","Gi\xe1p Th\xe2n":"Tuy\u1ec1n Trung THU\u1ef6","\u1ea4t D\u1eadu":"Tuy\u1ec1n Trung THU\u1ef6","B\xednh Tu\u1ea5t":"\u1ed0c Th\u01b0\u1ee3ng TH\u1ed4","\u0110inh H\u1ee3i":"\u1ed0c Th\u01b0\u1ee3ng TH\u1ed4","M\u1eadu T\xfd":"T\xedch L\u1ecbch HO\u1ea2","K\u1ef7 S\u1eedu":"T\xedch L\u1ecbch HO\u1ea2","Canh D\u1ea7n":"T\xf9ng B\xe1ch M\u1ed8C","T\xe2n M\xe3o":"T\xf9ng B\xe1ch M\u1ed8C","Nh\xe2m Th\xecn":"Tr\u01b0\u1eddng L\u01b0u THU\u1ef6","Qu\xfd Ty":"Tr\u01b0\u1eddng L\u01b0u THU\u1ef6","Gi\xe1p Ng\u1ecd":"Sa Trung KIM","\u1ea4t M\xf9i":"Sa Trung KIM","B\xednh Th\xe2n":"S\u01a1n H\u1ea1 HO\u1ea2","\u0110inh D\u1eadu":"S\u01a1n H\u1ea1 HO\u1ea2","M\u1eadu Tu\u1ea5t":"B\xecnh \u0110\u1ecba M\u1ed8C","K\u1ef7 H\u1ee3i":"B\xecnh \u0110\u1ecba M\u1ed8C","Canh T\xfd":"B\xedch Th\u01b0\u1ee3ng TH\u1ed4","T\xe2n S\u1eedu":"B\xedch Th\u01b0\u1ee3ng TH\u1ed4","Nh\xe2m D\u1ea7n":"Kim B\u1ea1ch KIM","Qu\xfd M\xe3o":"Kim B\u1ea1ch KIM","Gi\xe1p Th\xecn":"Ph\xfa \u0110\u0103ng HO\u1ea2","\u1ea4t Ty":"Ph\xfa \u0110\u0103ng HO\u1ea2","B\xednh Ng\u1ecd":"Thi\xean H\xe0 THU\u1ef6","\u0110inh M\xf9i":"Thi\xean H\xe0 THU\u1ef6","M\u1eadu Th\xe2n":"\u0110\u1ea1i Tr\u1ea1ch TH\u1ed4","K\u1ef7 D\u1eadu":"\u0110\u1ea1i Tr\u1ea1ch TH\u1ed4","Canh Tu\u1ea5t":"Thoa Xuy\u1ebfn KIM","T\xe2n H\u1ee3i":"Thoa Xuy\u1ebfn KIM","Nh\xe2m T\xfd":"Tang \u0110\u1ed1c M\u1ed8C","Qu\xfd S\u1eedu":"Tang \u0110\u1ed1c M\u1ed8C","Gi\xe1p D\u1ea7n":"\u0110\u1ea1i Kh\xea THU\u1ef6","\u1ea4t M\xe3o":"\u0110\u1ea1i Kh\xea THU\u1ef6","B\xednh Th\xecn":"Sa Trung TH\u1ed4","\u0110inh Ty":"Sa Trung TH\u1ed4","M\u1eadu Ng\u1ecd":"Thi\xean Th\u01b0\u1ee3ng HO\u1ea2","K\u1ef7 M\xf9i":"Thi\xean Th\u01b0\u1ee3ng HO\u1ea2","Canh Th\xe2n":"Th\u1ea1ch L\u1ef1u M\u1ed8C","T\xe2n D\u1eadu":"Th\u1ea1ch L\u1ef1u M\u1ed8C","Nh\xe2m Tu\u1ea5t":"\u0110\u1ea1i H\u1ea3i THU\u1ef6","Qu\xfd H\u1ee3i":"\u0110\u1ea1i H\u1ea3i THU\u1ef6"},AgeElements:{"Gi\xe1p T\xfd":"kim","\u1ea4t S\u1eedu":"kim","B\xednh D\u1ea7n":"hoa","\u0110inh M\xe3o":"hoa","M\u1eadu Th\xecn":"moc","K\u1ef7 Ty":"moc","Canh Ng\u1ecd":"tho","T\xe2n M\xf9i":"tho","Nh\xe2m Th\xe2n":"kim","Qu\xfd D\u1eadu":"kim","Gi\xe1p Tu\u1ea5t":"hoa","\u1ea4t H\u1ee3i":"hoa","B\xednh T\xfd":"thuy","\u0110inh S\u1eedu":"thuy","M\u1eadu D\u1ea7n":"tho","K\u1ef9 M\xe3o":"tho","Canh Th\xecn":"kim","T\xe2n Ty":"kim","Nh\xe2m Ng\u1ecd":"moc","Qu\xfd M\xf9i":"moc","Gi\xe1p Th\xe2n":"thuy","\u1ea4t D\u1eadu":"thuy","B\xednh Tu\u1ea5t":"tho","\u0110inh H\u1ee3i":"tho","M\u1eadu T\xfd":"hoa","K\u1ef7 S\u1eedu":"hoa","Canh D\u1ea7n":"moc","T\xe2n M\xe3o":"moc","Nh\xe2m Th\xecn":"thuy","Qu\xfd Ty":"thuy","Gi\xe1p Ng\u1ecd":"kim","\u1ea4t M\xf9i":"kim","B\xednh Th\xe2n":"hoa","\u0110inh D\u1eadu":"hoa","M\u1eadu Tu\u1ea5t":"moc","K\u1ef7 H\u1ee3i":"moc","Canh T\xfd":"tho","T\xe2n S\u1eedu":"tho","Nh\xe2m D\u1ea7n":"kim","Qu\xfd M\xe3o":"kim","Gi\xe1p Th\xecn":"hoa","\u1ea4t Ty":"hoa","B\xednh Ng\u1ecd":"thuy","\u0110inh M\xf9i":"thuy","M\u1eadu Th\xe2n":"tho","K\u1ef7 D\u1eadu":"tho","Canh Tu\u1ea5t":"kim","T\xe2n H\u1ee3i":"kim","Nh\xe2m T\xfd":"moc","Qu\xfd S\u1eedu":"moc","Gi\xe1p D\u1ea7n":"thuy","\u1ea4t M\xe3o":"thuy","B\xednh Th\xecn":"tho","\u0110inh Ty":"tho","M\u1eadu Ng\u1ecd":"hoa","K\u1ef7 M\xf9i":"hoa","Canh Th\xe2n":"moc","T\xe2n D\u1eadu":"moc","Nh\xe2m Tu\u1ea5t":"thuy","Qu\xfd H\u1ee3i":"thuy"}},p=function(){function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,n);var i=t.stem||"giap",e=t.branch||"ty";if(void 0===i||void 0===e)throw"Undefined stem or branch";this.stem=i,this.branch=e;var a=Ziwei.Configs.Stems.Orders.indexOf(this.stem),o=Ziwei.Configs.Branches.Orders.indexOf(this.branch);if(0>a||0>o)throw"Invalid stem or branch";if(a.isEven()^o.isEven()===!0)throw"Invalid stem-branch pair"}return _createClass(n,[{key:"toString",value:function(){return[Ziwei.Configs.Stems.Names[this.stem],Ziwei.Configs.Branches.Names[this.branch]].join(" ")}}]),n}(),T=function(){function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,n),this.key=t.key||"keyname",this.name=t.name||"<N/A>",this.gender=t.gender,void 0===Ziwei.Configs.Genders.Names[this.gender]&&(this.gender="male"),this.birthHour=t.birthHour||t.hour,void 0===Ziwei.Configs.Branches.Names[this.birthHour]&&(this.birthHour="ty"),this.birthDay=t.birthDay||t.day||1,(this.birthDay<=0||this.birthDay>30)&&(this.birthDay=1),this.birthMonth=t.birthMonth||t.month,void 0===Ziwei.Configs.Branches.Names[this.birthMonth]&&(this.birthMonth="ty");var i=t.birthYear||t.year;this.birthYear=new Ziwei.Models.GanZhi(i);var e=Ziwei.Configs.Stems.Directions[this.birthYear.stem];this.yinyangGender=[Ziwei.Configs.Stems.Yinyang[e],Ziwei.Configs.Genders.Names[this.gender]].join(" "),this.fateDirection=e*Ziwei.Configs.Genders.Directions[this.gender]}return _createClass(n,[{key:"updateCuc",value:function(n,t){this.cucElement=n,this.cucNumber=t}},{key:"detail",value:function(){var n=[this.yinyangGender,Ziwei.Configs.Branches.Names[this.birthHour],this.birthDay,Ziwei.Configs.Branches.Names[this.birthMonth],this.birthYear];return n[0]+", sinh gi\u1edd "+n[1]+" ng\xe0y "+n[2]+" th\xe1ng "+n[3]+" n\u0103m "+n[4]}},{key:"toString",value:function(){var n=[this.name,this.yinyangGender,Ziwei.Configs.Branches.Names[this.birthHour],this.birthDay,Ziwei.Configs.Branches.Names[this.birthMonth],this.birthYear.inspect];return"<Ziwei.Models.Profile - Name: "+n[0]+" - Gender: "+n[1]+" - Birthday: "+n[2]+" "+n[3]+"/"+n[4]+"/"+n[5]+">"}}]),n}(),f=function(){function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,n),this.position=t.position,this.name=t.name,this.isBody=t.isBody,this.mainStars=t.mainStars,this.goodStars=t.goodStars,this.badStars=t.badStars,this.trangSinhConstellation=t.trangSinhConstellation,this.opportunityAge=t.opportunityAge}return _createClass(n,[{key:"getFullNames",value:function(){var n=this;return{position:n.position.getFullName("Branches"),name:n.name.getFullName("Palaces"),body:n.isBody?"Th\xe2n":"",mainStars:n.mainStars.map(function(t){var i=Ziwei.Configs.ForteenMainStars.Places[t][n.position];return t.getFullName("ForteenMainStars")+(" ("+i+")")}),goodStars:n.goodStars.map(function(n){return n.getFullName()}),badStars:n.badStars.map(function(n){return n.getFullName()}),trangSinhConstellation:n.trangSinhConstellation.getFullName("TrangSinhConstellation"),opportunityAge:n.opportunityAge}}},{key:"getShortNames",value:function(){var n=this;return{position:n.position.getFullName("Branches"),name:n.name.getShortName("Palaces"),body:n.isBody?"Th\xe2n":"",mainStars:n.mainStars.map(function(t){var i=Ziwei.Configs.ForteenMainStars.Places[t][n.position];return t.getShortName("ForteenMainStars")+(" ("+i+")")}),goodStars:n.goodStars.map(function(n){return n.getShortName()}),badStars:n.badStars.map(function(n){return n.getShortName()}),trangSinhConstellation:n.trangSinhConstellation.getShortName("TrangSinhConstellation"),opportunityAge:n.opportunityAge}}}]),n}(),_=function(){function n(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];_classCallCheck(this,n),this.profile=t.profile;var i=t.palaces,e={};i.forEach(function(n,t){var i=new Ziwei.Models.ResultPalace(Object.assign({position:n},t));e[n]=i}),this.palaces=e,this.tuanCoordinate=t.tuanCoordinate,this.trietCoordinate=t.trietCoordinate,this.connectedCoordinates=t.connectedCoordinates}return _createClass(n,[{key:"renderTemplateContext",value:function(){var n=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];return{renderedPalaces:this.palaces.map(function(t,i){return i.renderTemplateContext(n)}),centerInfo:"Center Infomation!"}}}]),n}(),C=function(){function n(){var n=[["anhctv","Chu Th\u1ecb V\xe2n Anh","N\u1eef","M\xe3o","14","D\u1ea7n","B\xednh","D\u1ea7n"],["chind","Nguy\u1ec5n Di\u1ec7p Chi","N\u1eef","M\xe3o","23","T\u1ef5","Gi\xe1p","Ng\u1ecd"],["dangnh","Nguy\u1ec5n H\u1ea3i \u0110\u0103ng","Nam","Th\xe2n","1","H\u1ee3i","T\xe2n","M\xf9i"],["ducnm","Nguy\u1ec5n Minh \u0110\u1ee9c","Nam","M\xe3o","15","H\u1ee3i","M\u1eadu","T\xfd"],["gianghh","H\xe0 H\u01b0\u01a1ng Giang","N\u1eef","D\u1ea7n","7","Th\xecn","T\xe2n","M\xf9i"],["hoactq","Chu Th\u1ecb Qu\u1ef3nh Hoa","N\u1eef","D\u1ea7n","28","Th\xe2n","T\xe2n","M\xf9i"],["huonghh","H\xe0n Huy\u1ec1n H\u01b0\u01a1ng","N\u1eef","T\u1ef5","20","D\u1ea7n","T\xe2n","M\xf9i"],["huyennth","Nguy\u1ec5n Th\u1ecb Thu Huy\u1ec1n","N\u1eef","T\u1ef5","5","Th\xecn","Gi\xe1p","T\xfd"],["khoin","Nguy\u1ec5n Kh\xf4i","Nam","M\xf9i","2","Th\xecn","T\xe2n","M\xf9i"],["nam_1","Nam 1","Nam","M\xe3o","16","Ng\u1ecd","Qu\xfd","D\u1eadu"],["nam_2","Nam 2","Nam","D\u1ea7n","29","T\xfd","K\u1ef7","M\xf9i"],["ngocpb","Ph\xf9ng B\xe1 Ng\u1ecdc","Nam","T\xfd","22","S\u1eedu","Nh\xe2m","Th\xe2n"],["nu_1","N\u1eef 1","N\u1eef","H\u1ee3i","10","H\u1ee3i","Gi\xe1p","Th\xecn"],["nu_2","N\u1eef 2","N\u1eef","M\xe3o","3","Tu\u1ea5t","Canh","Ng\u1ecd"],["nu_3","N\u1eef 3","N\u1eef","D\u1ea7n","24","M\xf9i","\u0110inh","M\xe3o"],["nu_4","N\u1eef 4","N\u1eef","S\u1eedu","29","D\u1ea7n","\u0110inh","S\u1eedu"],["nu_5","N\u1eef 5","N\u1eef","M\xf9i","14","D\u1eadu","Qu\xfd","D\u1eadu"],["nu_6","N\u1eef 6","N\u1eef","M\xe3o","26","Ng\u1ecd","T\xe2n","H\u1ee3i"],["oanhntm","Nguy\u1ec5n Th\u1ecb Mai Oanh","N\u1eef","T\u1ef5","14","S\u1eedu","Gi\xe1p","D\u1ea7n"],["thanhnx","Nguy\u1ec5n Xu\xe2n Th\xe0nh","Nam","T\u1ef5","22","Th\xecn","T\xe2n","M\xf9i"],["trungnt","Trung NT","Nam","T\xfd","10","Ng\u1ecd","Nh\xe2m","T\xfd"],["trungnt2","Nguy\u1ec5n Th\xe0nh Trung","Nam","H\u1ee3i","19","D\u1eadu","Nh\xe2m","Tu\u1ea5t"],["trungpt","Ph\xf9ng Th\xe0nh Trung","Nam","T\xfd","21","M\xf9i","Qu\xfd","D\u1eadu"],["tuanpm","Tu\u1ea5n PM","Nam","Th\xe2n","28","Th\xe2n","\u1ea4t","M\xe3o"],["yenbth","B\xf9i Th\u1ecb H\u1ea3i Y\u1ebfn","N\u1eef","Tu\u1ea5t","12","Ng\u1ecd","\u0110inh","M\xe3o"]],t={};return n.forEach(function(n){var i={key:n[0],name:n[1],gender:Ziwei.Configs.Genders.Converts[n[2]],hour:Ziwei.Configs.Branches.Converts[n[3]],day:parseInt(n[4]),month:Ziwei.Configs.Branches.Converts[n[5]],year:{stem:Ziwei.Configs.Stems.Converts[n[6]],branch:Ziwei.Configs.Branches.Converts[n[7]]}};t[n[0]]=new Ziwei.Models.Profile(i)}),t}this.profiles=n()};return C.prototype.calcResultTable=function(n){var t=this,i=this.calcSelfBodyPosition(n.birthHour,n.birthMonth),e=_slicedToArray(i,2),a=e[0],o=e[1],r=this.calcPalacesPositions(a),h=this.calcCuc(a,n.birthYear.stem),s=_slicedToArray(h,2),u=s[0],c=s[1];n.updateCuc(u,c);var l=this.calcForteenMainStars(u,c,n.birthDay),g=this.calcOtherImportantStars(n.birthYear.stem,n.birthYear.branch),m=g.findKey(function(n,t){return t.includes("loc_ton")}),d=this.calcOpportunityAges(a,c,n.fateDirection),y=this.calcThaiTueConstellation(n.birthYear.branch),p=this.calcTrangSinhConstellation(c,n.fateDirection),T=this.calcLocTonConstellation(m,n.fateDirection),f=this.calcSixDeadlyStars(n.birthHour,m,n.birthYear.branch),_=this.calcSixLuckyStars(n.birthMonth,n.birthHour),C=this.calcNormalStars(n.birthMonth,n.birthYear.branch),v=this.calcFourTransformationStars(n.birthYear.stem,l,_),S=Ziwei.Configs.Branches.Names.allKeys(),b={};S.forEach(function(n){b[n]={name:r[n],isBody:n===o,mainStars:l[n]||[],trangSinhConstellation:p[n],goodStars:[],badStars:[],opportunityAge:d[n]};var i=g[n];t.insertMultipleStarsToPalace(b[n],i,"OtherImportantStars"),i=f[n],t.insertMultipleStarsToPalace(b[n],i,"SixDeadlyStars"),i=_[n],t.insertMultipleStarsToPalace(b[n],i,"SixLuckyStars");var e=y[n];t.insertSingleStarToPalace(b[n],e,"ThaiTueConstellation"),e=T[n],t.insertSingleStarToPalace(b[n],e,"LocTonConstellation"),i=C[n],t.insertMultipleStarsToPalace(b[n],i,"NormalStars"),i=v[n],t.insertMultipleStarsToPalace(b[n],i,"FourTransformationStars")});var H=new Ziwei.Models.ResultTable({profile:n,palaces:b,tuanCoordinate:this.calcTuanCoordinate(),trietCoordinate:this.calcTrietCoordinate(),connectedCoordinates:this.calcConnectedPalaceCoordinates(a)});return H},C.prototype.calculatePresetProfile=function(){var n=arguments.length<=0||void 0===arguments[0]?"thanhnx":arguments[0],t=this.profiles[n];if(void 0===t)throw"Invalid profile key";return this.calcResultTable(t)},C.prototype.calculateUserInputProfile=function(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=new Ziwei.Models.Profile(n);return this.calcResultTable(t)},C.prototype.calcSelfBodyPosition=function(n,t){var i=Ziwei.Configs.Branches.Indexes[n],e=Ziwei.Configs.Branches.Indexes[t],a=e.limitInc(-i+1),o=e.limitInc(i-1);return[Ziwei.Configs.Branches.Orders[a],Ziwei.Configs.Branches.Orders[o]]},C.prototype.calcCuc=function(n,t){var i=Ziwei.Configs.Wuxing.ElementsByBranches[n],e=Ziwei.Configs.Wuxing.Elements.indexOf(i),a=Ziwei.Configs.Stems.Indexes[t],o=e.limitInc(a,5,0),r=Ziwei.Configs.Wuxing.Elements[o],h=Ziwei.Configs.Wuxing.CucByElements[r];return[r,h]},C.prototype.calcPalacesPositions=function(n){var t=Ziwei.Configs.Branches.Indexes[n],i=Ziwei.Configs.Branches.Names.allKeys(),e=Ziwei.Configs.Palaces.Orders;return this.mergeSequencesFromIndex(i,e,t)},C.prototype.calcOpportunityAges=function(n,t,i){var e=Ziwei.Configs.Branches.Indexes[n],a=Ziwei.Configs.Branches.Names.allKeys(),o=Array.fromRange(0,11).map(function(n){return t+10*n});return this.mergeSequencesFromIndex(a,o,e,-1===i)},C.prototype.calcConnectedPalaceCoordinates=function(n){var t=Ziwei.Configs.Branches.Indexes[n],i=Ziwei.Configs.Palaces.DrawingRootCoordinates[n],e=t.limitInc(6),a=Ziwei.Configs.Branches.Orders[e],o=Ziwei.Configs.Palaces.DrawingRootCoordinates[a],r=Ziwei.Configs.BranchSets.Trilogy.ByBranches[n],h=Ziwei.Configs.BranchSets.Trilogy.ByElements[r].slice(),s=h.indexOf(n);h.splice(s,1);var u=h.map(function(n){return Ziwei.Configs.Palaces.DrawingRootCoordinates[n]}),c=[o];return c.push.apply(c,_toConsumableArray(u)),c.map(function(n){return[n,i]})},C.prototype.calcTuViPosition=function(n,t,i){var e=i%t,a=i.quotient(t),o=1;if(0===e){var r=Ziwei.Configs.Branches.Indexes.dan;return o=r.limitInc(a-1),Ziwei.Configs.Branches.Orders[o]}var h=Ziwei.Configs.Wuxing.KmtlnTable.allValues(),s=h.indexOf(Ziwei.Configs.Wuxing.KmtlnTable[n]),u=s+e-1,c=h[u];if(t>i)return c;var l=Ziwei.Configs.Branches.Indexes[c];return o=l.limitInc(a),Ziwei.Configs.Branches.Orders[o]},C.prototype.calcCoLiemVuPositions=function(n){var t=Ziwei.Configs.Branches.Indexes[n];return[Ziwei.Configs.Branches.Orders[t.limitInc(-1)],Ziwei.Configs.Branches.Orders[t.limitInc(4)],Ziwei.Configs.Branches.Orders[t.limitInc(-4)]]},C.prototype.calcNhatDongPositions=function(n){var t=Ziwei.Configs.Branches.Indexes[n];return[Ziwei.Configs.Branches.Orders[t.limitInc(1)],Ziwei.Configs.Branches.Orders[t.limitInc(-1)]]},C.prototype.calcPhaQuanPosition=function(n){var t=Ziwei.Configs.Branches.Indexes[n];return Ziwei.Configs.Branches.Orders[t.reflectIndex()]},C.prototype.calcThienPhuConstellationPositions=function(n){var t=Ziwei.Configs.Branches.Indexes[n],i=t.limitInc(2),e=[Ziwei.Configs.Branches.Orders[i]];return Array.fromRange(1,6).forEach(function(){i=i.limitInc(),e.push(Ziwei.Configs.Branches.Orders[i])}),e},C.prototype.calcForteenMainStars=function(n,t,i){var e=["tu_vi","thien_co","liem_trinh","vu_khuc","thai_duong","thien_dong","pha_quan","thien_phu","thai_am","tham_lang","cu_mon","thien_tuong","thien_luong","that_sat"],a=[],o=this.calcTuViPosition(n,t,i);a.push(o),a.push.apply(a,_toConsumableArray(this.calcCoLiemVuPositions(o))),a.push.apply(a,_toConsumableArray(this.calcNhatDongPositions(a[3])));var r=this.calcPhaQuanPosition(o);a.push(r),a.push.apply(a,_toConsumableArray(this.calcThienPhuConstellationPositions(r)));var h={};return e.forEach(function(n,t){var i=a[t];void 0===h[i]&&(h[i]=[]),h[i].push(n)}),h},C.prototype.calcFourTransformationStars=function(n,t,i){var e={giap:["liem_trinh","thien_phu","vu_khuc","thai_duong"],at:["thien_co","thien_luong","tu_vi","thai_am"],binh:["thien_dong","thien_co","van_xuong","liem_trinh"],dinh:["thai_am","thien_dong","thien_co","cu_mon"],mau:["tham_lang","thai_am","huu_bat","thien_co"],ky:["vu_khuc","tham_lang","thien_luong","van_khuc"],canh:["thai_duong","vu_khuc","thai_am","thien_dong"],tan:["cu_mon","thai_duong","van_khuc","van_xuong"],nham:["thien_luong","tu_vi","thien_phu","vu_khuc"],quy:["pha_quan","cu_mon","thai_am","tham_lang"]},a=e[n].map(function(n){var e=t.findKey(function(i){return t[i].includes(n)});if(void 0!==e)return e;var a=i.findKey(function(t){return i[t].includes(n)});return a}),o=[a,["hoa_loc","hoa_quyen","hoa_khoa","hoa_ky"]].transpose().toHashOfArrays();return o},C.prototype.calcHinhDieuYPositions=function(n){var t=Ziwei.Configs.Branches.Indexes[n]-2,i=Ziwei.Configs.Branches.Indexes.dau,e=i.limitInc(t-1),a=Ziwei.Configs.Branches.Indexes.suu,o=a.limitInc(t-1),r=o;return[Ziwei.Configs.Branches.Orders[e],Ziwei.Configs.Branches.Orders[o],Ziwei.Configs.Branches.Orders[r]]},C.prototype.calcHoaCaiPosition=function(n){var t=Ziwei.Configs.BranchSets.Trilogy.ByBranches[n],i=Ziwei.Configs.BranchSets.Trilogy.ByElements[t][1];return i},C.prototype.calcAmSatPosition=function(n){var t=["thin","dan","ty","tuat","than","ngo"],i=Ziwei.Configs.Branches.Indexes[n]-2,e=t[i%6];
return e},C.prototype.calcCoQuaPositions=function(n){var t=Ziwei.Configs.Branches.Indexes[n],i=(t.limitInc()-1).quotient(3),e=Ziwei.Configs.BranchSets.Trilogy.ByRelatives[i],a=e.map(function(n){return Ziwei.Configs.Branches.Indexes[n]}),o=a[0].limitInc(-1),r=a[2].limitInc();return[Ziwei.Configs.Branches.Orders[o],Ziwei.Configs.Branches.Orders[r]]},C.prototype.calcKhocHuPositions=function(n){var t=Ziwei.Configs.Branches.Indexes.ngo,i=Ziwei.Configs.Branches.Indexes[n],e=t.limitInc(-i+1),a=t.limitInc(i-1);return[Ziwei.Configs.Branches.Orders[e],Ziwei.Configs.Branches.Orders[a]]},C.prototype.calcNormalStars=function(n,t){var i=this.calcHinhDieuYPositions(n),e=_slicedToArray(i,3),a=e[0],o=e[1],r=e[2],h=this.calcHoaCaiPosition(t),s=this.calcAmSatPosition(n),u=this.calcCoQuaPositions(t),c=_slicedToArray(u,2),l=c[0],g=c[1],m=this.calcKhocHuPositions(t),d=_slicedToArray(m,2),y=d[0],p=d[1],T=[[a,"thien_hinh"],[o,"thien_dieu"],[r,"thien_y"],[h,"hoa_cai"],[s,"am_sat"],[l,"co_than"],[g,"qua_tu"],[y,"thien_khoc"],[p,"thien_hu"]].toHashOfArrays();return T},C.prototype.calcLocTonPosition=function(n){var t={giap:"dan",at:"mao",binh:"ty2",dinh:"ngo",mau:"ty2",ky:"ngo",canh:"than",tan:"dau",nham:"ty",quy:"hoi"};return t[n]},C.prototype.calcThienMaPosition=function(n){var t=Ziwei.Configs.BranchSets.Trilogy.ByBranches[n],i=Ziwei.Configs.BranchSets.Trilogy.ByElements[t][0],e=Ziwei.Configs.Branches.Indexes[i],a=e.limitInc(6);return Ziwei.Configs.Branches.Orders[a]},C.prototype.calcOtherImportantStars=function(n,t){var i=this.calcLocTonPosition(n),e=this.calcThienMaPosition(t),a={};return void 0===a[i]&&(a[i]=[]),a[i].push("loc_ton"),void 0===a[e]&&(a[e]=[]),a[e].push("thien_ma"),a},C.prototype.calcThaiTueConstellation=function(n){var t=Ziwei.Configs.Branches.Indexes[n],i=Ziwei.Configs.Branches.Names.allKeys(),e=Ziwei.Configs.ThaiTueConstellation.Orders;return this.mergeSequencesFromIndex(i,e,t)},C.prototype.calcTrangSinhConstellation=function(n,t){var i=["than","hoi","ty2","than","dan"],e=i[n-2],a=Ziwei.Configs.Branches.Indexes[e],o=Ziwei.Configs.Branches.Names.allKeys(),r=Ziwei.Configs.TrangSinhConstellation.Orders.slice();return this.mergeSequencesFromIndex(o,r,a,-1==t)},C.prototype.calcLocTonConstellation=function(n,t){var i=Ziwei.Configs.Branches.Indexes[n],e=Ziwei.Configs.Branches.Names.allKeys(),a=Ziwei.Configs.LocTonConstellation.Orders;return this.mergeSequencesFromIndex(e,a,i,-1==t)},C.prototype.calcKhongKiepPositions=function(n){var t=Ziwei.Configs.Branches.Indexes.hoi,i=Ziwei.Configs.Branches.Indexes[n],e=t.limitInc(-i+1),a=t.limitInc(i-1);return[Ziwei.Configs.Branches.Orders[e],Ziwei.Configs.Branches.Orders[a]]},C.prototype.calcKinhDaPositions=function(n){var t=Ziwei.Configs.Branches.Indexes[n],i=t.limitInc(),e=t.limitInc(-1);return[Ziwei.Configs.Branches.Orders[i],Ziwei.Configs.Branches.Orders[e]]},C.prototype.calcHoaLinhPositions=function(n,t){var i={hoa:["suu","mao"],thuy:["dau","tuat"],moc:["dan","tuat"],kim:["mao","tuat"]},e=Ziwei.Configs.Branches.Indexes[t],a=Ziwei.Configs.BranchSets.Trilogy.ByBranches[n],o=_slicedToArray(i[a],2),r=o[0],h=o[1],s=Ziwei.Configs.Branches.Indexes[r],u=Ziwei.Configs.Branches.Indexes[h],c=s.limitInc(e-1),l=u.limitInc(-e+1);return[Ziwei.Configs.Branches.Orders[c],Ziwei.Configs.Branches.Orders[l]]},C.prototype.calcSixDeadlyStars=function(n,t,i){var e=this.calcKhongKiepPositions(n),a=_slicedToArray(e,2),o=a[0],r=a[1],h=this.calcKinhDaPositions(t),s=_slicedToArray(h,2),u=s[0],c=s[1],l=this.calcHoaLinhPositions(i,n),g=_slicedToArray(l,2),m=g[0],d=g[1],y=[[o,"dia_khong"],[r,"dia_kiep"],[u,"kinh_duong"],[c,"da_la"],[m,"hoa_tinh"],[d,"linh_tinh"]].toHashOfArrays();return y},C.prototype.calcTaHuuPositions=function(n){var t=Ziwei.Configs.Branches.Indexes.thin,i=Ziwei.Configs.Branches.Indexes[n]-2,e=t.limitInc(i-1),a=e.reflectIndex();return[Ziwei.Configs.Branches.Orders[e],Ziwei.Configs.Branches.Orders[a]]},C.prototype.calcXuongKhucPositions=function(n){var t=Ziwei.Configs.Branches.Indexes.thin,i=Ziwei.Configs.Branches.Indexes[n],e=t.limitInc(i-1),a=e.reflectIndex();return[Ziwei.Configs.Branches.Orders[a],Ziwei.Configs.Branches.Orders[e]]},C.prototype.calcSixLuckyStars=function(n,t){var i=this.calcTaHuuPositions(n),e=_slicedToArray(i,2),a=e[0],o=e[1],r=this.calcXuongKhucPositions(t),h=_slicedToArray(r,2),s=h[0],u=h[1],c=[[a,"ta_phu"],[o,"huu_bat"],[s,"van_xuong"],[u,"van_khuc"]].toHashOfArrays();return c},C.prototype.calcTuanCoordinate=function(){return[1,1]},C.prototype.calcTrietCoordinate=function(){return[4,3]},C.prototype.mergeSequencesFromIndex=function(n,t,i){var e=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],a=t.slice();if(1!=i){var o=[],r=[];e?(o=a.slice(0,i).reverse(),r=a.slice(i,a.length).reverse()):(o=a.slice(12-i+1,a.length),r=a.slice(0,12-i+1)),a=o.concat(r)}return[n,a].transpose().toHash()},C.prototype.insertSingleStarToPalace=function(n,t,i){if(void 0!==t){var e=Ziwei.Configs[i].Qualities[t];n[e+"Stars"].push(t)}},C.prototype.insertMultipleStarsToPalace=function(n,t,i){void 0!==t&&t.constructor===Array&&["good","bad"].forEach(function(e){var a,o=t.filter(function(n){return Ziwei.Configs[i].Qualities[n]===e});return(a=n[e+"Stars"]).push.apply(a,_toConsumableArray(o))})},f.prototype.renderHtml=function(n){var t=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],i=function(n,t){var i=arguments.length<=2||void 0===arguments[2]?!0:arguments[2],e=i?n.getFullName("ForteenMainStars"):n.getShortName("ForteenMainStars");return e+(" ("+Ziwei.Configs.ForteenMainStars.Places[n][t]+")")},e=function(n,t,e){var a=arguments.length<=3||void 0===arguments[3]?!0:arguments[3],o=arguments.length<=4||void 0===arguments[4]?!0:arguments[4],r='<span class="{{ class }}" style="{{ style }}">{{ star }}</span>',h=Handlebars.compile(r),s=t.map(function(t){var r=a?t.getFullName():t.getShortName();o&&(r=i(t,n,a));var s=r.getPlaceQualityColorStyle(),u=h({star:r,"class":e,style:s});return u}).join("\n");return s},a=t?this.getFullNames():this.getShortNames();a.mainStars=e(this.position,this.mainStars,"main-star",t),a.goodStars=e(this.position,this.goodStars,"good-star",t,!1),a.badStars=e(this.position,this.badStars,"bad-star",t,!1),a.selfClass="M\u1ec7nh"===a.name?"self":"",a.bodyClass="Th\xe2n"===a.body?"body":"";var o=Handlebars.compile(n),r=o(a);return r},_.prototype.renderHtml=function(n,t,i){var e=Handlebars.compile(n),a={};this.palaces.forEach(function(n,i){a[n]=i.renderHtml(t)});var o=this.tuanCoordinate.convertPalaceCoordinateToPos(),r=this.trietCoordinate.convertPalaceCoordinateToPos(),h={tuanPos:o,trietPos:r,renderedPalaces:a,centerInfo:this.profile.renderHtml(i)},s=e(h);return s},_.prototype.drawConnectedLines=function(n){this.connectedCoordinates.forEach(function(t,i){var e=_slicedToArray(t,2),a=e[0],o=e[1],r=0===i?"red":"blue";a.drawLineTo(o,n,r)})},T.prototype.renderHtml=function(n){var t=Handlebars.compile(n),i=this.birthYear.toString(),e=Ziwei.Configs.Wuxing.AgeSymbols[i],a=Ziwei.Configs.Wuxing.AgeElements[i],o={name:this.name,birthHour:this.birthHour.getFullName("Branches"),birthDay:this.birthDay,birthMonth:this.birthMonth.getFullName("Branches"),birthYear:this.birthYear,ageSymbol:e,ageSymbolColorStyle:a.getElementColorStyle(),yinyangGender:this.yinyangGender,cucFullName:this.cucElement.getFullName("Wuxing"),cucNumber:this.cucNumber,cucElementColorStyle:this.cucElement.getElementColorStyle()},r=t(o);return r},C.renderHtml=function(n){var t=$("#palace-template").html(),i=$("#result-template").html(),e=$("#center-info-template").html(),a=n.renderHtml(i,t,e);$("div#result-display").replaceWith(a),document.title=n.profile.name+" - Ziwei Calculator in JS",n.drawConnectedLines("canvas")},{Configs:{BranchSets:n,Branches:t,ForteenMainStars:i,FourTransformationStars:e,Genders:a,LocTonConstellation:o,NormalStars:r,OtherImportantStars:h,Palaces:s,SixDeadlyStars:u,SixLuckyStars:c,Stems:l,ThaiTueConstellation:g,TrangSinhConstellation:m,TuanTriet:d,Wuxing:y},Models:{GanZhi:p,Profile:T,ResultPalace:f,ResultTable:_},Calculator:C}}(Ziwei);